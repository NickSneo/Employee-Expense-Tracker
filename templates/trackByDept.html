{% extends 'nav.html' %}

{% block content %}

<div class="container">
    {% if deptExpense|length %}
        <div class="row">
            <div id="piechart"></div>
        </div>
    {% else %}
        <div class="row">
            <h1>No data found, please add some expenses</h1>
        </div>
    {% endif %}
    
    
</div>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        // Load google charts
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(drawChart);

        // Draw the chart and set the chart values
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Department', 'Total Expense'],
                {% for k, v in deptExpense.items %}
                    ["{{k}}", {{ v }}],
                {% endfor %}
            ]);

        // Optional; add a title and set the width and height of the chart
        var options = { 'title': 'Total Expenses by Department', 'width': 800, 'height': 600 };

        // Display the chart inside the <div> element with id="piechart"
        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
        }
    </script>

</div>
{% endblock %}